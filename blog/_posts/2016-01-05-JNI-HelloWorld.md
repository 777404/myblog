---
layout: post
title:  "JNI笔记之一：Hello，World！"
date:   2016-01-05
---

# 测试环境
* Mac OS X 10.11
* JDK 1.8.0_60


```java
public class HelloWorld {
    private native void print();
    public static void main(String[] args) {
        new HelloWorld().print();
    }
    static {
        System.loadLibrary("HelloWorld");
    }
}
```


```shell
javac HelloWorld.java
javah -jni HelloWorld
```


```cpp
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class HelloWorld */

#ifndef _Included_HelloWorld
#define _Included_HelloWorld
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     HelloWorld
 * Method:    print
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_HelloWorld_print
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif
```



```cpp
#include <jni.h>
#include <stdio.h>
#include "HelloWorld.h"
 
JNIEXPORT void JNICALL 
Java_HelloWorld_print(JNIEnv *env, jobject o) {
    printf("Hello, World!\n");
    return;
}
```

```shell
gcc "-I/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home/include" \
    "-I/Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home/include/darwin" \
    -c HelloWorld.c
```

```shell
gcc -dynamiclib -o libhelloworld.dylib HelloWorld.o
```

```shell
java HelloWorld
```


# 参考资料
* http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/intro.html
* http://mrjoelkemp.com/2012/01/getting-started-with-jni-and-c-on-osx-lion/
